{% load static %}

<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm fixed-top py-3">
  <div class="container">

    <!-- Logo -->
    <a class="navbar-brand fw-bold fs-4 text-primary" href="{% url 'home:home' %}">
      <i class="fas fa-store me-1"></i> MyShop
    </a>

    <!-- Mobile Toggle -->
    <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Navbar Items -->
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto align-items-center">

        <!-- Search -->
        <li class="nav-item mx-lg-4 my-2 my-lg-0">
          <form class="d-flex" action="#" method="get">
            <input class="form-control me-2" type="search" name="q" placeholder="Search for products..." style="min-width: 250px;">
            <button class="btn btn-outline-primary" type="submit">
              <i class="fas fa-search"></i>
            </button>
          </form>
        </li>

        <!-- My Orders -->
        <li class="nav-item me-3">
          <a class="nav-link fw-semibold text-dark" href="{% url 'orders:order_history' %}">
            <i class="fas fa-box me-1"></i> My Orders
          </a>
        </li>

        <!-- Wishlist -->
        {% if user.is_authenticated %}
        <li class="nav-item position-relative me-3">
<a class="nav-link fw-semibold text-dark" href="{% url 'wishlist:view_wishlist' %}" title="My Wishlist">
            <i class="fas fa-heart fa-lg text-danger"></i>
            {% if wishlist_count %}
              <span class="badge bg-danger rounded-pill position-absolute top-0 start-100 translate-middle small">
                {{ wishlist_count }}
              </span>
            {% endif %}
          </a>
        </li>
        {% endif %}

        <!-- Cart -->
        <li class="nav-item position-relative me-3">
          <a class="nav-link fw-semibold text-dark" href="{% url 'cart:cart_list' %}" title="Shopping Cart">
            <i class="fas fa-shopping-cart fa-lg"></i>
            {% if user.is_authenticated and cart_count %}
              <span class="badge bg-danger rounded-pill position-absolute top-0 start-100 translate-middle small">
                {{ cart_count }}
              </span>
            {% endif %}
          </a>
        </li>

        <!-- Profile / Login -->
        <li class="nav-item dropdown">
          {% if user.is_authenticated %}
            <a class="nav-link dropdown-toggle fw-semibold text-dark" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="fas fa-user-circle fa-lg"></i>
            </a>
            <ul class="dropdown-menu dropdown-menu-end shadow-sm border-0 rounded-3" aria-labelledby="userDropdown">
              <li><span class="dropdown-item-text">ðŸ‘‹ Hello, {{ user.get_username }}!</span></li>
              
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="{% url 'accounts:logout' %}"><i class="fas fa-sign-out-alt me-2"></i> Logout</a></li>
            </ul>
          {% else %}
            <a class="nav-link fw-semibold text-dark" href="{% url 'accounts:login' %}">
              <i class="fas fa-sign-in-alt me-1"></i> Login
            </a>
          {% endif %}
        </li>
      </ul>
    </div>

  </div>
</nav>
